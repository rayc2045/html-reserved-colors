<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HTML Color Names</title>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/39514595?s=32">
    <!-- Font: Rubik -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/assets/styles/style.css">
  </head>
  <body
    class="grid-center"
    @mounted="init"
    @mousedown.once="audioCatch([copySound], 3)"
    @dblclick="scrollTo(0, 0)"
    @contextmenu.prevent
    @selectstart.prevent
    @dragstart.prevent
  >
    <header
      class="hide"
      :class="[{ animate: !isLoading }]"
    >
      <h1>Color Names</h1>
      <p>
        Modern browsers support 140 named colors. Use them by name, Hex color code or RGB value.
      </p>
    </header>

    <ul
      class="cards hide"
      :class="[{ animate: !isLoading }]"
    >
      <li class="card" v-for="color in colors" :key="color.name">
        <div
          class="color-display pointer"
          :style="`background-color: ${color.hex};`"
          @click="copyCode(color, 'name')"
        ></div>
        <h1
          class="pointer"
          :style="`${
            color.name.length >= 19 ? 'font-size: 1.5em; margin: 0.5em;' :
            color.name.length >= 17 ? 'font-size: 1.5em; margin: 0.7em;' :
            color.name.length >= 15 ? 'font-size: 1.6em; margin: 0.7em;' :
            ''
          }`"
          @click="copyCode(color, 'name')"
        >
          {{ color.name }}
        </h1>
        <div class="hex-section pointer" @click="copyCode(color, 'hex')">
          <div class="title uppercase">HEX CODE</div>
          <div class="hex-value">{{ color.hex }}</div>
        </div>
        <div class="rgb-section pointer" @click="copyCode(color, 'rgb')">
          <div class="title uppercase">RGB VALUE</div>
          <div class="rgb-value">{{ color.rgb }}</div>
        </div>
      </li>
    </ul>

    <script type="module">
      import { createApp } from 'https://unpkg.com/petite-vue?module';

      createApp({
        isLoading: true,
        colors: [],
        copySound: new Audio('/src/assets/audio/modern-technology-select.wav'),
        async init() {
          await this.loadColorData();
          this.isLoading = false;
          document.querySelectorAll('.hide').forEach(el => el.classList.remove('hide'));
        },
        async loadColorData() {
          const data = await fetch('/src/api/colors.json');
          this.colors = await data.json();
          console.log(`${this.colors.length} colors`);
        },
        copyCode(color, value) {
          this.playAudio(this.copySound);
          if (value === 'name')
            return navigator.clipboard.writeText(
              color.name
                .split(' ')
                .map(text => text.toLowerCase())
                .join('')
            );
          navigator.clipboard.writeText(color[value]);
        },
        playAudio(audio, volume = 1) {
          audio.currentTime = 0;
          audio.volume = volume;
          audio.play();
        },
        audioCatch(audios, minute = 1) {
          audios.forEach(audio => this.playAudio(audio, 0));
          setTimeout(() => this.audioCatch(audios, minute), minute * 60_000);
        }
      }).mount();
    </script>
  </body>
</html>
